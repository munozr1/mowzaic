# ===========================
# MOWZAIC ENVIRONMENT VARIABLES
# ===========================
# Copy this file to .env and fill in your values
# Never commit .env to git

# ===========================
# FRONTEND VARIABLES (VITE_*)
# These are exposed to the browser
# ===========================

# Application Configuration
VITE_MODE=development                          # Application mode: development, production, test
VITE_API_URL=http://localhost:3000            # Backend API base URL
VITE_APP_URL=http://localhost:5173            # Frontend application URL (for OAuth redirects)

# Supabase (Frontend - Public Keys Only)
VITE_SUPABASE_URL=https://your-project.supabase.co    # Supabase project URL
VITE_SUPABASE_ANON_KEY=your-anon-key                  # Supabase anonymous (public) key

# External Services (Public Keys)
VITE_MAPBOX_TOKEN=pk.your-mapbox-token                # Mapbox API token for address autocomplete
VITE_STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-key   # Stripe publishable key (pk_test_ for testing, pk_live_ for production)

# ===========================
# BACKEND VARIABLES (Vercel Serverless Functions)
# These are NOT exposed to the browser
# Set these in Vercel Dashboard for production
# ===========================

# Supabase (Backend - Service Role Key)
SUPABASE_URL=https://your-project.supabase.co         # Supabase project URL (same as frontend)
SUPABASE_ANON_KEY=your-anon-key                       # Supabase anonymous key (same as frontend)
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key       # Supabase service role key (ADMIN access - NEVER expose to browser)

# Database
DATABASE_URL=postgresql://user:pass@host:port/db      # PostgreSQL connection string (for backend)

# Stripe (Backend)
STRIPE_SECRET_KEY=sk_test_your-stripe-secret          # Stripe secret key (sk_test_ for testing, sk_live_ for production)
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret       # Stripe webhook signing secret

# JWT Authentication Secrets
ACCESS_TOKEN_SECRET=your-random-secret-min-32-chars   # JWT access token signing secret
REFRESH_TOKEN_SECRET=your-random-secret-min-32-chars  # JWT refresh token signing secret

# Application Mode
MODE=development                                       # Backend mode: development, production, test
NODE_ENV=development                                   # Node environment: development, production, test
PORT=3000                                             # Backend server port

# ===========================
# TESTING VARIABLES (Local Only)
# For CI/CD, use GitHub Secrets
# ===========================

TEST_URL=http://localhost:5173                        # Frontend test URL
BACKEND_URL=http://localhost:3000                     # Backend test URL
HEADLESS=true                                         # Run Puppeteer in headless mode
SLOW_MO=0                                             # Slow down Puppeteer execution (ms) for debugging

# Test User Credentials (DO NOT use in production)
FOREVER_TEST_EMAIL=test@example.com                   # Permanent test user email
FOREVER_TEST_PASSWORD=TestPassword123!                # Permanent test user password

# ===========================
# CI/CD VARIABLES (GitHub Secrets Only)
# DO NOT add these to .env files
# ===========================

# GitHub Actions
# BACKEND_REPO_PAT=ghp_xxx                           # GitHub Personal Access Token for private backend repo
# VERCEL_TOKEN=xxx                                    # Vercel CLI authentication token
# VERCEL_ORG_ID=team_xxx                             # Vercel organization ID
# VERCEL_PROJECT_ID=prj_xxx                          # Vercel project ID

# Test Environment (GitHub Secrets)
# SUPABASE_URL_TEST=https://test-project.supabase.co
# SUPABASE_ANON_KEY_TEST=test-anon-key
# SUPABASE_SERVICE_ROLE_KEY_TEST=test-service-key
# TEST_DATABASE_URL=postgresql://test...
# STRIPE_TEST_SECRET_KEY=sk_test_xxx
# STRIPE_TEST_WEBHOOK_SECRET=whsec_test_xxx

# ===========================
# NOTES
# ===========================
#
# 1. SECURITY:
#    - VITE_* variables are PUBLIC and embedded in browser bundle
#    - Non-VITE_* variables are PRIVATE and only used server-side
#    - Never put secrets in VITE_* variables
#
# 2. ENVIRONMENTS:
#    - Development: Use .env file (this template)
#    - Production: Set variables in Vercel Dashboard
#    - Testing: Use GitHub Secrets for CI/CD
#
# 3. SUPABASE KEYS:
#    - VITE_SUPABASE_ANON_KEY: Public key for frontend (respects RLS)
#    - SUPABASE_SERVICE_ROLE_KEY: Admin key for backend (bypasses RLS)
#
# 4. STRIPE KEYS:
#    - Development/Test: Use pk_test_* and sk_test_*
#    - Production: Use pk_live_* and sk_live_*
#
# 5. HOW TO GENERATE SECRETS:
#    - ACCESS_TOKEN_SECRET: openssl rand -base64 32
#    - REFRESH_TOKEN_SECRET: openssl rand -base64 32
